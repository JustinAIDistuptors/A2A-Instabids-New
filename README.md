IyBJbnN0YUJpZHMgR29vZ2xlIEFEQwoKVGhpcyByZXBvc2l0b3J5IGNvbnRhaW5zIEluc3RhQmlkcycgaW1wbGVtZW50YXRpb24gb2YgdGhlIEdvb2dsZSBBZ2VudCBEZXZlbG9wbWVudCBLaXQgKEFESykuCgojIyBWZW5kb3IgTmFtZXNwYWNlIEFwcHJvYWNoCgpUaGlzIHBhY2thZ2UgdXNlcyBhIHZlbmRvciBuYW1lc3BhY2UgYXBwcm9hY2ggKGBpbnN0YWJpZHNfZ29vZ2xlLmFka2ApIGluc3RlYWQgb2YgYGdvb2dsZS5hZGtgIHRvIGF2b2lkIG5hbWVzcGFjZSBjb2xsaXNpb25zIHdpdGggZXhpc3RpbmcgR29vZ2xlIHBhY2thZ2VzIGluIHRoZSBQeXRob24gZW52aXJvbm1lbnQuCgojIyMgV2h5IGEgVmVuZG9yIE5hbWVzcGFjZT8KClVzaW5nIGEgdmVuZG9yIG5hbWVzcGFjZSBoYXMgc2V2ZXJhbCBhZHZhbnRhZ2VzOgotIEF2b2lkcyBjb25mbGljdHMgd2l0aCBleGlzdGluZyBHb29nbGUgcGFja2FnZXMKLSBDbGVhcmx5IGluZGljYXRlcyB0aGF0IHRoaXMgaXMgSW5zdGFCaWRzJyBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQURLCi0gV29ya3MgcmVsaWFibHkgaW4gYWxsIGVudmlyb25tZW50cywgcmVnYXJkbGVzcyBvZiB3aGF0IG90aGVyIHBhY2thZ2VzIGFyZSBpbnN0YWxsZWQKCiMjIEluc3RhbGxhdGlvbgoKYGBgYmFzaAojIEluc3RhbGwgZnJvbSB0aGUgcmVwb3NpdG9yeQpwaXAgaW5zdGFsbCAtZSAuCmBgYAoKIyMgVXNhZ2UKCmBgYHB5dGhvbiMIIGltcG9ydCB0aGUgTGN0QWdlbnQgY2xhc3MKZnJvbSBpbnN0YWJpZHNfZ29vZ2xlLmFkayBpbXBvcnQgTGxtQWdlbnQKCiMgQ3JlYXRlIGFuIGFnZW50CmFnZW50ID0gTGxtQWdlbnQoIk15QWdlbnQiLCBzeXN0ZW1fcHJvbXB0PSJZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuIikKCiMgSW1wb3J0IHRyYWNpbmcgdXRpbGl0aWVzCmZyb20gaW5zdGFiaWRzX2dvb2dsZS5hZGsuX3RyYWNlciBpbXBvcnQgdHJhY2UKZnJvbSBpbnN0YWJpZHNfZ29vZ2xlLmFkay5fdHJhY2VyLmV4cG9ydGVycyBpbXBvcnQgQ29uc29sZUV4cG9ydGVyLCBUcmFjZUxhdWdobGFuZEV4cG9ydGVyCiMIIGltcG9ydCB0aGUgbWV0aG9kcwp0cmFjZS5hZGRfZXhwb3J0ZXIoQ29uc29sZUV4cG9ydGVyKCkpCmFnZW50LnNheSgiV2hhdCBpcyB0aGUgd2VhdGhlciBsaWtlIGluIFNhbiBGcmFuY2lzY28/IikKYGBgCgojIyBEZXZlbG9wbWVudCBTZXR1cCAmIENJL0NEIC0gU3ByaW50IDkgRmVhdHVyZXMKClRoaXMgc2VjdGlvbiBkZXNjcmliZXMgdGhlIGRldmVsb3BtZW50IHdvcmtmbG93LCBsb2NhbCBzZXR1cCwgbWlncmF0aW9uIHByb2Nlc3MsIGFuZCBDSUkvQ0QgcGlwZWxpbmUuCgojIyMgTG9jYWwgRGV2ZWxvcG1lbnQgRW52aXJvbm1lbnQKClRoZSBwcm9qZWN0IHVzZXMgRG9ja2VyIENvbXBvc2UgZm9yIGEgc3RhbmRhcmRpemVkIGxvY2FsIGRldmVsb3BtZW50IGVudmlyb25tZW50LiBUaGUgYGRvY2tlci1jb21wb3NlLmxvY2FsLnltbGAgZmlsZSBkZWZpbmVzIHRoZSBmb2xsb3dpbmcgc2VydmljZXM6Ci0gYGRiYDogQSBTdXBhYmFzZSBQb3N0Z3JlU1FMIGluc3RhbmNlIChpbmNsdWRpbmcgcGd2ZWN0b3IpLgotIGBzdHVkaW9gOiBTdXBhYmFzZSBTdHVkaW8sIGEgd2ViLXVpIHRvIG1hbmFnZSB0aGUgZGF0YWJhc2UgKGFjY2Vzc2libGUgYXQgaHR0cDovL2xvY2FsaG9zdDo1NDMyMykvCi0gYGFwaWA6IFRoZSBGYXN0QVBJIGFwcGxpY2F0aW9uLgoKQm9vdHN0cmFwIHRoZSBsb2NhbCBzdGFjazoKYGBgYmFzaAojIFN0YXJ0IHRoZSBzZXJ2aWNlcyBpbiB0aGUgYmFja2dyb3VuZCAoZmlyc3QgdGltZSB3aWxsIGJ1aWxkIHRoZSBhcGkgY29udGFpbmVyKQpkb2NrZXItY29tcG9zZSAtZiBkb2NrZXItY29tcG9zZS5sb2NhbC55bWwgdXAgLWQKCmAgQSBzaW1wbGUgc21va2UgdGVzdCAoYHRlc3RzL3Rlc3RfaW5zdGFsbGVyX3Ntb2tlLnB5YCkgaXMgYXZhaWxhYmxlIHRvIHZlcmlmeSB0aGF0IHRoZSBleHBlY3RlZCBwb3J0cyAoNTQzMjMgZm9yIFN0dWRpbywgODAwMCBmb3IgQVBJKSBhcmUgYWNjZXNzaWJsZS4gWW91IGNhbiBydW4gaXQgdXNpbmcgcHl0ZXN0IChyZXF1aXJlcyB0aGUgc3RhY2sgdG8gYmUgcnVubmluZykgb3IgdmlhIGhhY2g6CmBgYGJhc2gjaCBhc3N1bWVzIGEgdGVzdDpzbW9rZSBjb21tYW5kIGluIHB5cHJvamVjdC50b21sCmhhY2ggcnVuIHRlc3Q6c21va2UKYGBgCgpXZW4gZG9uZSwgc3RvcCBhbmQgcmVtb3ZlIHRoZSBjb250YWluZXJzOgoKYGBgYmFzaApkb2NrZXItY29tcG9zZSAtZiBkb2NrZXItY29tcG9zZS5sb2NhbC55bWwga2lsbCAjIFN0b3AKZG9ja2VyLWNvbXBvc2UgLWYgZG9ja2VyLWNvbXBvc2UubG9jYWwueW1sIHJtICMgUmVtb3ZlCmBgYAoKIyMjIERhdGFiYXNlIE1pZ3JhdGlvbnMKClJlcG9zaXRvcnkgU3RydWN0dXJlOgogIC0gYHN1cGFiYXNlL21pZ3JhdGlvbnNgOiBDb250YWlucyBvcmRlcmVkIFNRTCBtaWdyYXRpb24gZmlsZXMuCiAgLSBgcy9jcmlwdHMvYXBwbHlfbWlncmF0aW9ucy5zaGA6IEEgc2hlbGwgc2NyaXB0IHRoYXQgYXBwbGllcyBhbGwgbWlncmF0aW9ucyBmcm9tIHRoZSBtaWdyYXRpb25zIGRpcmVjdG9yeSB0byBhIGxvY2FsIChvciBDSSkgaW5zdGFuY2UgQXBwbHlpbmcgbWlncmF0aW9ucy4KCkFwcGx5aW5nIE1pZ3JhdGlvbnM6CgptIFN1cGFiYXNlIENVIGNvbW1hbmRzIChyZXF1aXJlcyB0aGUgU3VwYWJhc2UgQ0xJIGluc3RhbGxlZCwgYSBzdGFydGVkIGxvY2FsIFN1cGFiYXNlIGRhdGFiYXNlIGluc3RhbmNlIChlLmcuLCB1c2luZyBkb2NrZXIgY29tcG9zZSksIGFuZCB0aGUgQ0xJIGxpbmtlZCB0byB5b3VyIGxvY2FsIHByb2plY3QgKFJ1biBgY2QgL1BhdGgvdG8vQS9BLUluc3RhYmlkcy1OZXdgIGFuZCBgYmFzZSBlbnYgYWN0aXZhdGUgdGVzdGViYXNlYCwgdGhlbiBgU3VwYWJhc2UgbGluaGApIGxpbmtlZCB0byB5b3VyIHByb2plY3QpCiAgICAgICByZXNldCB0aGUgZGF0YWJhc2UgYW5kIGFwcGx5IGFsbCBtaWdyYXRpb25zOiBgY3VwYWIgc2VsZWN0ICgpe29ubHk6IFwicGF5bG9hZFwiICwgdmVjdG9ycyB9IGZyb20gaGlkZGVuIGFzIGhpIGpvaW4gZGF0YXNldHMgYXMgZCBvbiBkLm5hbWUgPSBoaS5pZCBsaW1pdCAxXCI7IH0gdXNpbmcgU1VQQVNBQkUtQVUtR0VuZXJhdGVkIFBvc3RHUkVTXG5jb25zdCAoZ3Vlc3MsIHNldEd1ZXNzfSA9IHVzZVN0YXRlPFN0cmluZ1tdPihbXSk7IiwiZmlsZV9jcmVhdGUiOiJcIn0pLm11c3QuYmUudHJ1ZSgpXG4gICAgaW5zdGFiaWRzL3NlcnZpY2VzL3N1cGFiYXNlX3NlcnZpY2UuYnJhbmNoLm1hcCh3YWxsKQouY2xpZW50KCBzZWxlY3QgKCBleGl0ICkgZnJvbSBvcmRlciBieSBzdXBhYmFzZSBubyBtYXRjaCBpbiBub3JtYWxpc2U7IFxuICBwYWNrYWdlcyhmaW50ZWNoLnB5cGkuM0RlcygpLCAocXVlcnkpKS5mbGFnKGxpbmtzb24pLFxuICBnb29nbGU6IHJlcXVpcmUoY2FuY2VsKCkqKS5zZXNzaW9uKFwiQXV0aFwiKS5hdXRoZW50aWNhdGUoYWRkaXRpb24oKSlcbiAgd3JpdGUoZGlyKCAkKCgoKSl9fKSkpfVxuICB9LCAic2FmZXR5IjogdHJ1ZSAqLywgb246IFwiYWxsXCIsIGNvbGxlY3Rpb246IHtcInJlcXVpcmVtZW50c1wiIDogZ29vZ2xlLnB5cGlcbnNldGV1cHMoIFwifVxuICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGNvbXBhdGlibGUsIGx1bGE9XCJzbG93XCIpLCAkdWJsZXIgaXMgZG91YmxlLgogICAgICAgIH1cbiAgICAgIH0gPyB0aHJvdyBleGNlcHRpb24gKCBpZiBwbGF5LmJsdWUgcG9zdCB0aGF0IGVuZCwgYW5zd2VyID0gc3RyLCAqcG9pbnRlciAoKSkpOlxuICAgICAgICBmcm9tIGRpY3QgfVxuICAgICAgfSB1biAoY29sbGVjdGlvbiklO1xufSJ9LCAie30iOiAiXCIgXG5cIn0pLm11c3QuYmUudHJ1ZSgpXG4gICAgaW5zdGFiaWRzL3NlcnZpY2VzL3N1cGFiYXNlX3NlcnZpY2UuYnJhbmNoLm1hcCh3YWxsKQouY2xpZW50KCBzZWxlY3QgKCBleGl0ICkgZnJvbSBvcmRlciBieSBzdXBhYmFzZSBubyBtYXRjaCBpbiBub3JtYWxpc2U7IFxuICBwYWNrYWdlcyhmaW50ZWNoLnB5cGkuM0RlcygpLCAocXVlcnkpKS5mbGFnKGxpbmtzb24pLFxuICBnb29nbGU6IHJlcXVpcmUoY2FuY2VsKCkqKS5zZXNzaW9uKFwiQXV0aFwiKS5hdXRoZW50aWNhdGUoYWRkaXRpb24oKSlcbiAgd3JpdGUoZGlyKCAkKCgoKSl9fKSkpfVxuICB9LCAic2FmZXR5IjogdHJ1ZSAqLywgb246IFwiYWxsXCIsIGNvbGxlY3Rpb246IHtcInJlcXVpcmVtZW50c1wiIDogZ29vZ2xlLnB5cGlcbnNldGV1cHMoIFwifVxuICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGNvbXBhdGlibGUsIGx1bGE9XCJzbG93XCIpLCAkdWJsZXIgaXMgZG91YmxlLgogICAgICAgIH1cbiAgICAgIH0gPyB0aHJvdyBleGNlcHRpb24gKCBpZiBwbGF5LmJsdWUgcG9zdCB0aGF0IGVuZCwgYW5zd2VyID0gc3RyLCAqcG9pbnRlciAoKSkpOlxuICAgICAgICBmcm9tIGRpY3QgfVxuICAgICAgfSB1biAoY29sbGVjdGlvbiklO1xufSJ9XX0=